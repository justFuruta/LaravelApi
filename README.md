# Тестовое задание:  Разработка API в Laravel 10
**Для запуска приложения:**

- Переименуйте файл `.env.example` в `.env`(если нужно настройте подключение к используемой СУБД, по умолчанию sqlite);
- Выполните миграции БД, используя команду ```php artisan migrate```;
- Запустите веб-сервер командой ```php artisan run serve```;

**Приложение будет доступно по адресу** *localhost:8000*

# CRUD-операции

## Пользователи 
**Доступные эндпоинты:**
- **GET** `/api/users` - Возвращает список всех пользователей;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"first_name":  string,
	"last_name":  string,
	"phone_number":  string,
	"avatar":  string(Путь к изображению)
	}]
```
- **GET** `/api/users/{id}` - Возвращает пользователя с указанным id;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"first_name":  string,
	"last_name":  string,
	"phone_number":  string,
	"avatar":  string(Путь к изображению)
	}]
```
- **POST** `/api/users` - Создает нового пользователя
**Параметры запроса:**

| Параметр      | Тип      | Обязательный? | Описание                                          |
|---------------|----------|---------------|---------------------------------------------------|
| first_name    | string   | Да            | Имя пользователя (более 3 и менее 40 символов)           |
| last_name     | string   | Да            | Фамилия пользователя (более 3 и менее 40 символов)       |
| phone_number  | string   | Да            | Номер телефона пользователя (в формате +7XXXXXXXXXX) |
| avatar        | file     | Да            | Аватар пользователя (изображение в форматах JPG или PNG, не более 2 МБ) |
- **PUT** `/api/users/{id}` - Обновляет данные пользователя
**Параметры запроса:**

| Параметр      | Тип      | Обязательный? | Описание                                          |
|---------------|----------|---------------|---------------------------------------------------|
| first_name    | string   | Да            | Имя пользователя (более 3 и менее 40 символов)           |
| last_name     | string   | Да            | Фамилия пользователя (более 3 и менее 40 символов)       |
| phone_number  | string   | Да            | Номер телефона пользователя (в формате +7XXXXXXXXXX) |
| avatar        | file     | Да            | Аватар пользователя (изображение в форматах JPG или PNG, не более 2 МБ) |
- **DELETE** `/api/users/{id}` - Удаляет пользователя с указанным id;

## Компании
**Доступные эндпоинты:**
- **GET** `/api/companies` - Возвращает список всех компаний;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"name":  string   ,
	"description":  string   ,
	"logo":  string(Путь к изображению)
	},]
```
- **GET** `/api/companies/{id}` - Возвращает компанию с указанным id;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"name":  string   ,
	"description":  string   ,
	"logo":  string(Путь к изображению)
	},]
```
- **POST** `/api/companies` - Создает новую компанию;
**Параметры запроса:**

| Параметр      | Тип      | Обязательный? | Описание                                          |
|---------------|----------|---------------|---------------------------------------------------|
| name    		| string   | Да            | Название компании (более 3 и менее 40 символов)           |
| description   | string   | Да            | Описание компании (от 150 до 400 символов)       |
| logo      	| file     | Да            | Логотип компании (изображение в формате PNG, не более 3 МБ) |
- **PUT** `/api/companies/{id}` - Обновляет данные пользователя
**Параметры запроса:**

| Параметр      | Тип      | Обязательный? | Описание                                          |
|---------------|----------|---------------|---------------------------------------------------|
| name    		| string   | Да            | Название компании (более 3 и менее 40 символов)           |
| description   | string   | Да            | Описание компании (от 150 до 400 символов)       |
| logo      	| file     | Да            | Логотип компании (изображение в формате PNG, не более 3 МБ) |
- **DELETE** `/api/companies/{id}` - Удаляет пользователя с указанным id;

## Комментарии
**Доступные эндпоинты:**
- **GET** `/api/comments` - Возвращает список всех компаний;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"user_id":  integer,
	"company_id":  integer,
	"content":  string,
	"rating":  integer,
	"created_at":  string(datetime)
	},]
```
- **GET** `/api/comments/{id}` - Возвращает компанию с указанным id;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"user_id":  integer,
	"company_id":  integer,
	"content":  string,
	"rating":  integer,
	"created_at":  string(datetime)
	},]
```
- **POST** `/api/comments` - Создает новую компанию;
**Параметры запроса:**

| Параметр      | Тип      | Обязательный? | Описание                                          |
|---------------|----------|---------------|---------------------------------------------------|
| user_id  		| integer  | Да            | ID пользователя									|
| company_id	| integer  | Да            | ID компании 								       |
| content		| string   | Да            | Содержание комментария |
| rating		| integer  | Да            | Оценка|
- **PUT** `/api/comments/{id}` - Обновляет данные пользователя
**Параметры запроса:**

| Параметр      | Тип      | Обязательный? | Описание                                          |
|---------------|----------|---------------|---------------------------------------------------|
| user_id  		| integer  | Да            | ID пользователя									|
| company_id	| integer  | Да            | ID компании 								       |
| content		| string   | Да            | Содержание комментария |
| rating		| integer  | Да            | Оценка|
- **DELETE** `/api/comments/{id}` - Удаляет пользователя с указанным id;

# Часть 2

## Получить комментарии компании по ID
**GET** `/api/companies/{id}/comments` - Возвращает все комментарии указанной компании;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"user_id":  integer,
	"company_id":  integer,
	"content":  string,
	"rating":  integer,
	"created_at":  string(datetime)
	"updated_at":  string(datetime)
	}
]
```
## Получить общую оценку компании
**GET** `/api/companies/{id}/grade` - Возвращает оценку указанной компании;
**Формат ответа**
```
"data":  integer
```

## Получить топ-10 компаний по оценке
**GET** `/api/rating` - Возвращает оценку указанной компании;
**Формат ответа**
```
"data":  [
	{
	"id":  integer,
	"name":  string,
	"description": string,
	"logo":  string,
	"created_at":  string(datetime),
	"updated_at":  string(datetime),
	"comments_avg_rating":  float
	},]
```